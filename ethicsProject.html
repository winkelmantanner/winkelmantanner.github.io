<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      const LESSONS = {

        // Underlying Theories
        1 : {
          questions : [
            {
              'q' : "A trolley is approaching along its track.  If it stays on its track, it will run over five people who are tied down to its track.  If you pull a lever, the trolley would be diverted to another track with only one person tied down.  According to Utilitarianism, should you pull the lever or not?  Why?",
              'a' : [
                "Pull the lever because it is 4 lives better than not pulling the lever.",
                "Don't pull the lever because you should not intervene without permission.",
                "Pull the lever because it would demonstrate a good amount of courage.",
              ],
              'c' : 0,
              'e' : 'Utilitarianism says to maximize net aggregate hapiness.  Saving 5 lives for the cost of 1 life is the better option, so Utilitarianism would obligate you to pull the lever.',
            },
          ],
        },

        // Business
        2 : {
          questions : [
            {
              'q' : "Why might Kantians disapprove of entrepreneurship?",
              'a' : [
                "Entrepreneurs want money.",
                "Entrepreneurs work only for the good of themselves.",
                "Entrepreneurs treat others as a means for making profit.",
              ],
              'c' : 2,
              'e' : 'Kant says to never treat humanity as a means for achieving some goal.',
            },
            {
              'q' : "Based on the results of the \"A Fine is a Price\" study, which of the following is <strong><i>least</i></strong> likely to deter someone from parking in a particular parking lot?",
              'a' : [
                "Leaving a note saying, \"I don't like you parking in this parking lot\"",
                "Leaving an official-looking note saying, \"You will be towed if you are found parked here again.\"",
                "Leaving an official-looking note saying, \"You will be fined $10.00 if you are found here 50 different days.\"",
              ],
              'c' : 2,
              'e' : 'The price of $10.00 for 50 days of parking is very low.',
            },
          ],
        },

        3 : {
          questions : [
            {
              'q' : "According to shareholder theory, should the business worry about causing traffic congestion?  Why or why not?",
              'a' : [
                "Yes, because the people in the other cars are immediately effected.",
                "Yes, because traffic congestion is a big problem caused by businesses.",
                "No, because worrying about causing traffic congestion would not maximize profits.",
                "No, because being stuck in traffic humbles a person.",
              ],
              'c' : 2,
              'e' : 'Shareholder theory says that the one and only social reponsibility of business is maximizing profits.',
            },
          ],
        },

        4 : {
          questions : [
            {
              'q' : "According to Thomas Carson, what is a lie?",
              'a' : [
                "a deliberate false statement made with the intent to deceive",
                "an expression of what is false",
                "a statement of something that is known to be untrue",
              ],
              'c' : 0,
              'e' : 'Carson defines a lie as a deliberate false statement made with the intent to deceive.',
            },
          ],
        },
      };

      // const VIDEO_WIDTH_NORMAL = 640;
      // const VIDEO_HEIGHT_NORMAL = 480;
      // const VIDEO_WIDTH_SMALL = 320;
      // const VIDEO_HEIGHT_SMALL = 240;
      // const VIDEO_WIDTH_LARGE = 1000;
      // const VIDEO_HEIGHT_LARGE = 240;

      let lessonID = 1;

      function setupOnClicks(lessonID) {
        questions = LESSONS[lessonID].questions;
        questions.forEach(function(question, question_index) {
          question.a.forEach(function(answer, answer_index) {
            const answerChoiceId = generateAnswerChoiceId(lessonID, question_index, answer_index);
            const questionId = generateQuestionId(lessonID, question_index);
            const is_correct = answer_index == question.c;
            document.getElementById(answerChoiceId).onclick = function(){
              document.getElementById(answerChoiceId).classList.remove('btn-default');
              document.getElementById(answerChoiceId).classList.add('btn-' + (is_correct ? 'success' : 'danger'));
              if(is_correct) {
                document.getElementById(questionId).hidden = false;
              }
            }
          });
        });
      }

      var myVideo = document.getElementById("video1"); 

      function playPause() { 
        if (myVideo.paused) {
          myVideo.play();
          document.getElementById('videoStatusDisplay').innerHTML = "Playing";
        }else{
          myVideo.pause();
          document.getElementById('videoStatusDisplay').innerHTML = "Paused"
        } 
      } 

      // function makeBig() { 
      //     myVideo.width = VIDEO_WIDTH_LARGE; 
      // } 

      function makeSmall() { 
          myVideo.width = VIDEO_WIDTH_SMALL; 
      } 

      function makeNormal() { 
          myVideo.width = VIDEO_WIDTH_NORMAL; 
      } 

      function generateQuestionId(lessonID, question_index) {
        return String(lessonID) + ":" + String(question_index);
      }

      function generateAnswerChoiceId(lessonID, question_index, answer_index) {
        return String(lessonID) + ":" + String(question_index) + ":" + String(answer_index);
      }

      function generateLesson(lessonID) {
        material = LESSONS[lessonID].material;
        questions = LESSONS[lessonID].questions;
        let html = "";
        html += '<a id="video1" target="_blank" class="btn btn-info" href="Presentation' + String(lessonID) + '.mp4">LECTURE ' + String(lessonID) + '</a>';
        html += '<hr>';
        html += '<h3>Questions</h3>';
        questions.forEach(function(question, question_index) {
          html += '<h4>';
          html += question.q;
          html += '</h4>';
          html += '<table><tbody>';
          question.a.forEach(function(answer, answer_index) {
            answerChoiceId = generateAnswerChoiceId(lessonID, question_index, answer_index);
            html += '<tr><td><div';
            html += ' id="' + answerChoiceId + '"';
            html += 'class="btn btn-default">';
            html += answer;
            html += '</div></td></tr>';
          });
          html += '</tbody></table>';
          html += '<div hidden="true" id="' + generateQuestionId(lessonID, question_index) + '">';
          html += question.e;
          html += '</div>';
        });
        return html;
      }

      function renderLesson(lessonID) {
        document.getElementById("whichLesson").innerHTML = "Lesson " + String(lessonID);
        document.getElementById("content").innerHTML = generateLesson(lessonID);
        myVideo = document.getElementById("video1"); 
        setupOnClicks(lessonID);
      }

      function previousLesson() {
        if(lessonID > 1) {
          lessonID -= 1;
          renderLesson(lessonID);
        }
      }

      function nextLesson() {
        if(lessonID < Object.keys(LESSONS).length) {
          lessonID += 1;
          renderLesson(lessonID);
        }
      }

      function onLoad() {
        renderLesson(lessonID);
      }
    </script>
  </head>
  <body onLoad="onLoad()">
    <div class="container">
      <h3>Business Ethics Project</h3>
      <button id="previousLessonButton" onClick="previousLesson()">Previous Lesson</button>
      <span id="whichLesson"></span>
      <button id="nextLessonButton" onClick="nextLesson()">Next Lesson</button>
      <hr>
      <div id="content"></div>
    </div>
    <hr>
    <footer>
      <p style="text-align: center;">Tanner Winkelman - Philosophy 3235 Project</p>
    </footer>
  </body>
</html>
